<!DOCTYPE HTML>
<html dir="ltr" lang=" en-US">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/EFM-Database/assets/css/rapport.css">
    <link rel="stylesheet" href="/EFM-Database/assets/css/customRapport.css">
    <title> Rapport </title>

    <!-- TODO html-1 : utilisation des fichiers locaux en de rupture de connexion internet dans la classe   -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plantuml-js@latest/dist/plantuml.min.css"> <script src="https://cdn.jsdelivr.net/npm/plantuml-js@latest/dist/plantuml.min.js"></script>
</head>
<body>
    <div class="book">
        <div id="menu_rapports">
            <a id="rapport_global-icon" href="/EFM-Database/" >
                <i class="fas fa-list"></i>
            </a>
            
            <a id="rapport_global-icon" href="/EFM-Database/pkg_variante_5/rapport" >
                <i class="fas fa-file-word"></i>
            </a>
            <a id="presentation-icon" href="/EFM-Database/pkg_variante_5/presentation" target="_blank">
                <i class="fas fa-file-powerpoint"></i>
            </a>
            
        </div>
       
        <div class="page">
            
<!--<p>pkg_variante_5/Projet-V5.md</p>
-->
<table class="word-style">
        <tbody>
            <tr>
              <td>
                    <img src="/EFM-Database/assets/images/logo.png" alt="Logo" />
                </td>
                <td colspan="2" class="header">
                    <p>Office de la Formation Professionnelle et de la Promotion du Travail</p>
                    <p>Direction R√©gionale Nord Ouest II</p>
                </td>
            </tr>
            <tr>
               <td class="bold">Solicode</td>
               <td class="bold">Examen de Fin de Module</td>
               <td class="bold">Date EFM : 12/02/2025</td>
            </tr>
            <tr>
                <td class="bold">Fili√®re : DMB</td>
                <td class="highlight">Base de donn√©es</td>
                <td class="bold">Dur√©e : 1 h 30 min</td>
            </tr>
            <tr>
               <td class="bold">Groupe : 101</td>
               <td class="">Variante 5</td>
               <td class="bold">Ann√©e de formation : 2024/2025</td>
            </tr>
        </tbody>
</table>

<h2 id="contexte-g√©n√©ral"><strong>Contexte G√©n√©ral</strong></h2>
<p>Tu travailles sur une <strong>application Laravel</strong> permettant aux utilisateurs de partager <strong>une seule recette de cuisine</strong>.<br />
Les autres utilisateurs peuvent ensuite <strong>donner leur avis et des suggestions d‚Äôam√©lioration</strong> sur la recette.</p>

<p>L‚Äôapplication doit permettre :</p>
<ul>
  <li><strong>Chaque utilisateur</strong> peut proposer <strong>une seule recette</strong> (<em>relation One-to-One avec <code class="language-plaintext highlighter-rouge">Utilisateur</code></em>).</li>
  <li><strong>Chaque recette</strong> peut recevoir plusieurs <strong>avis</strong> (<em>relation One-to-Many avec <code class="language-plaintext highlighter-rouge">Avis</code></em>).</li>
  <li><strong>Les avis</strong> peuvent contenir <strong>des suggestions d‚Äôam√©lioration</strong> (<em>relation Many-to-Many avec <code class="language-plaintext highlighter-rouge">Suggestion</code></em>).</li>
</ul>

<p>L‚Äôapplication doit afficher les recettes, mettre √† jour certaines de leurs donn√©es et permettre l‚Äô√©dition et la suppression des avis.</p>

<p>L‚Äôexamen est divis√© en <strong>deux parties</strong> :</p>

<ol>
  <li><strong>Partie 1 : Live Coding (30 minutes, 20 points)</strong>
    <ul>
      <li>Affichage des recettes avec leurs avis.</li>
      <li>Incr√©mentation du nombre de vues d‚Äôune recette et de ses avis via un Service.</li>
      <li>Ajout automatique d‚Äôune suggestion ‚ÄúPlat Favori‚Äù si une recette re√ßoit plus de 10 avis positifs.</li>
    </ul>
  </li>
  <li><strong>Partie 2 : Mini-Projet (45 minutes, 20 points)</strong>
    <ul>
      <li>Ajout d‚Äôun formulaire permettant de modifier les suggestions associ√©es √† un avis.</li>
      <li>Ajout des boutons ‚ÄúModifier‚Äù et ‚ÄúSupprimer‚Äù pour chaque avis.</li>
      <li>Am√©lioration du design de la page avec du CSS.</li>
    </ul>
  </li>
</ol>

<hr />

<h1 id="partie-1--live-coding-30-min---20-points"><strong>Partie 1 : Live Coding (30 min - 20 points)</strong></h1>
<p><strong>Objectif :</strong></p>
<ul>
  <li>Afficher la liste des recettes avec leurs avis.</li>
  <li>G√©rer le nombre de vues des recettes et des avis.</li>
  <li>Modifier dynamiquement les suggestions d‚Äôam√©lioration d‚Äôun avis (<em>Many-to-Many</em>).</li>
</ul>

<h2 id="bar√®me--questions-20-points"><strong>Bar√®me &amp; Questions (20 points)</strong></h2>
<h3 id="cr√©ation-de-la-classe-recetteservice-6-points"><strong>Cr√©ation de la classe <code class="language-plaintext highlighter-rouge">RecetteService</code> (6 points)</strong></h3>
<p><strong>Question 1 :</strong> Cr√©e une classe <code class="language-plaintext highlighter-rouge">RecetteService</code> dans <code class="language-plaintext highlighter-rouge">app/Services/</code> et ajoute une m√©thode <code class="language-plaintext highlighter-rouge">getRecettesWithAvis()</code> qui retourne la liste des recettes avec leurs relations (<code class="language-plaintext highlighter-rouge">utilisateur</code>, <code class="language-plaintext highlighter-rouge">avis</code>, <code class="language-plaintext highlighter-rouge">suggestions</code>). <em>(2 points)</em><br />
 <strong>Question 2 :</strong> Ajoute une m√©thode <code class="language-plaintext highlighter-rouge">incrementRecetteViews(Recette $recette)</code> qui <strong>incr√©mente le nombre de vues</strong> de la recette et sauvegarde la modification. <em>(2 points)</em><br />
 <strong>Question 3 :</strong> Ajoute une m√©thode <code class="language-plaintext highlighter-rouge">incrementAvisViews(Recette $recette)</code> qui <strong>incr√©mente le nombre de vues de chaque avis li√© √† cette recette</strong> et sauvegarde les modifications. <em>(2 points)</em></p>

<hr />

<h3 id="impl√©mentation-du-recettecontroller-6-points"><strong>Impl√©mentation du <code class="language-plaintext highlighter-rouge">RecetteController</code> (6 points)</strong></h3>
<p><strong>Question 4 :</strong> Cr√©e un contr√¥leur <code class="language-plaintext highlighter-rouge">RecetteController</code> et injecte <code class="language-plaintext highlighter-rouge">RecetteService</code> dans son constructeur via l‚ÄôInjection de D√©pendance. <em>(2 points)</em><br />
 <strong>Question 5 :</strong> Impl√©mente une m√©thode <code class="language-plaintext highlighter-rouge">index()</code> qui :</p>
<ul>
  <li>R√©cup√®re la liste des recettes via <code class="language-plaintext highlighter-rouge">RecetteService</code>.</li>
  <li>V√©rifie si une recette doit recevoir automatiquement la suggestion ‚ÄúPlat Favori‚Äù lorsqu‚Äôelle d√©passe <strong>10 avis positifs</strong>.</li>
  <li>Retourne les donn√©es √† la vue <code class="language-plaintext highlighter-rouge">index.blade.php</code>. <em>(4 points)</em></li>
</ul>

<hr />

<h3 id="cr√©ation-de-la-vue-indexbladephp-6-points"><strong>Cr√©ation de la Vue <code class="language-plaintext highlighter-rouge">index.blade.php</code> (6 points)</strong></h3>
<p><strong>Question 6 :</strong> Cr√©e une vue <code class="language-plaintext highlighter-rouge">resources/views/recettes/index.blade.php</code> qui affiche les recettes sous forme de tableau avec les colonnes suivantes :</p>
<ul>
  <li><strong>Nom de la recette</strong>.</li>
  <li><strong>Nom du cuisinier</strong> (<em>relation One-to-One</em>).</li>
  <li><strong>Nombre de vues de la recette</strong>.</li>
  <li><strong>Liste des avis avec leur propre compteur de vues</strong> (<em>relation One-to-Many</em>).</li>
  <li><strong>Liste des suggestions d‚Äôam√©lioration associ√©es aux avis</strong> (<em>relation Many-to-Many</em>). <em>(4 points)</em></li>
</ul>

<p><strong>Question 7 :</strong> Tester le bon fonctionnement de l‚Äôaffichage et s‚Äôassurer que les vues des recettes et des avis sont bien incr√©ment√©es apr√®s chaque rafra√Æchissement de la page. <em>(2 points)</em></p>

<hr />

<h3 id="d√©finition-de-la-route-et-test-2-points"><strong>D√©finition de la Route et Test (2 points)</strong></h3>
<p><strong>Question 8 :</strong> D√©clare une route <code class="language-plaintext highlighter-rouge">/recettes</code> dans <code class="language-plaintext highlighter-rouge">routes/web.php</code> pour appeler la m√©thode <code class="language-plaintext highlighter-rouge">index()</code> du <code class="language-plaintext highlighter-rouge">RecetteController</code>. <em>(1 point)</em><br />
 <strong>Question 9 :</strong> Lancer l‚Äôapplication, tester l‚Äôaffichage dans le navigateur et v√©rifier que :</p>
<ul>
  <li>Les <strong>recettes et leurs avis</strong> s‚Äôaffichent correctement.</li>
  <li>Les <strong>vues des recettes et des avis</strong> sont bien incr√©ment√©es.</li>
  <li>Les <strong>recettes d√©passant 10 avis positifs re√ßoivent automatiquement la suggestion ‚ÄúPlat Favori‚Äù</strong>. <em>(1 point)</em></li>
</ul>

<hr />

<h1 id="partie-2--mini-projet-45-min---20-points"><strong>Partie 2 : Mini-Projet (45 min - 20 points)</strong></h1>
<p><strong>Objectif :</strong></p>
<ul>
  <li>Ajouter une fonctionnalit√© d‚Äô√©dition des suggestions associ√©es aux avis.</li>
  <li>Permettre la suppression des avis.</li>
  <li>Am√©liorer le design et la responsivit√© de l‚Äôinterface.</li>
</ul>

<h2 id="bar√®me--questions-20-points-1"><strong>Bar√®me &amp; Questions (20 points)</strong></h2>
<h3 id="-modification-des-suggestions-dun-avis-8-points">** Modification des suggestions d‚Äôun avis (8 points)**</h3>
<p><strong>Question 10 :</strong> Ajouter une m√©thode <code class="language-plaintext highlighter-rouge">updateAvisSuggestions(Avis $avis, array $suggestionsIds)</code> dans <code class="language-plaintext highlighter-rouge">RecetteService</code> pour <strong>modifier les suggestions associ√©es √† un avis</strong>. <em>(3 points)</em><br />
 <strong>Question 11 :</strong> Cr√©er une m√©thode <code class="language-plaintext highlighter-rouge">edit($id)</code> dans <code class="language-plaintext highlighter-rouge">AvisController</code> qui retourne un formulaire d‚Äô√©dition avec la liste des suggestions disponibles. <em>(2 points)</em><br />
 <strong>Question 12 :</strong> Impl√©menter une m√©thode <code class="language-plaintext highlighter-rouge">update(Request $request, $id)</code> dans <code class="language-plaintext highlighter-rouge">AvisController</code> qui met √† jour les suggestions associ√©es √† un avis en utilisant <code class="language-plaintext highlighter-rouge">RecetteService</code>. <em>(2 points)</em><br />
 <strong>Question 13 :</strong> Impl√©menter une m√©thode <code class="language-plaintext highlighter-rouge">show($id)</code> dans <code class="language-plaintext highlighter-rouge">ArticleController</code>. <em>(1 points)</em></p>

<hr />

<h3 id="ajout-des-boutons-modifier-et-supprimer-6-points"><strong>Ajout des boutons ‚ÄúModifier‚Äù et ‚ÄúSupprimer‚Äù (6 points)</strong></h3>
<p><strong>Question 14 :</strong> Ajouter dans <code class="language-plaintext highlighter-rouge">index.blade.php</code> une colonne avec <strong>un bouton ‚ÄúModifier‚Äù redirigeant vers la page d‚Äô√©dition</strong> de l‚Äôavis. <em>(2 points)</em><br />
 <strong>Question 15 :</strong> Ajouter <strong>un bouton ‚ÄúSupprimer‚Äù avec un formulaire <code class="language-plaintext highlighter-rouge">DELETE</code></strong> pour supprimer un avis. <em>(2 points)</em><br />
 <strong>Question 16 :</strong> Impl√©menter la m√©thode <code class="language-plaintext highlighter-rouge">destroy($id)</code> dans <code class="language-plaintext highlighter-rouge">AvisController</code> pour g√©rer la suppression d‚Äôun avis. <em>(2 points)</em></p>

<hr />

<h3 id="-am√©lioration-de-laffichage-avec-du-css-6-points">** Am√©lioration de l‚Äôaffichage avec du CSS (6 points)**</h3>
<p><strong>Question 17 :</strong> Modifier <code class="language-plaintext highlighter-rouge">index.blade.php</code> pour afficher les recettes et les avis sous forme de <strong>tableau stylis√©</strong> en ajoutant un fichier CSS. <em>(2 points)</em><br />
 <strong>Question 18 :</strong> Am√©liorer le <strong>formulaire d‚Äô√©dition</strong> pour qu‚Äôil soit plus clair et agr√©able visuellement. <em>(2 points)</em><br />
 <strong>Question 19 :</strong> V√©rifier que les boutons sont bien align√©s et que l‚Äôaffichage est <strong>responsive</strong>. <em>(2 points)</em></p>

<hr />

<h2 id="remarque"><strong>Remarque</strong></h2>
<ul>
  <li><strong>Total de l‚Äôexamen : 40 points.</strong></li>
  <li>Tu peux ajouter en bonus :
    <ul>
      <li><strong>Une alerte de confirmation</strong> avant la suppression d‚Äôun avis.</li>
      <li><strong>Un filtre pour afficher uniquement les recettes les plus vues.</strong></li>
      <li><strong>Un champ de recherche</strong> pour trouver une recette par son auteur.</li>
    </ul>
  </li>
</ul>

<p>Bonne chance ! üöÄ</p>


        </div>
    </div>
</body>



<!-- TODO ESSARRAJ : expliquer (ES6, module, import) dans lab-javascript et indiquer le lien de rapport de lab dans les pr√©requis  -->
<script type="module" src="/EFM-Database/assets/js/app.js"></script>

</html>